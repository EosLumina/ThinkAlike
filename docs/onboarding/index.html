<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThinkAlike Onboarding Guide</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { font-family: sans-serif; }
        #sidebar { min-height: 100vh; overflow-y: auto; width: 250px; } /* Fixed width sidebar */
        #content { padding-left: 20px; }
        .nav-link { cursor: pointer; }
        .section-content { display: none; margin-bottom: 20px;}
        .active-section { display: block; } /* Class for active section */
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <nav id="sidebar" class="col-md-3 col-lg-2 bg-light border-right">
            <div class="sidebar-sticky px-3 pt-3">
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link" href="#" data-section="overview">Project Overview</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="values">Core Values</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="architecture">Architecture</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="ui">UI Components</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="data">Data Handling</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="ai">AI Models</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="testing">Testing</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" data-section="contributing">Contributing</a></li>
                      <li class="nav-item"><a class="nav-link" href="#" data-section="quickstart">Quickstart</a></li>
                </ul>
            </div>
        </nav>

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4" id="content">
            <div id="overview" class="section-content"></div>
            <div id="values" class="section-content"></div>
            <div id="architecture" class="section-content"></div>
            <div id="ui" class="section-content"></div>
            <div id="data" class="section-content"></div>
            <div id="ai" class="section-content"></div>
            <div id="testing" class="section-content"></div>
            <div id="contributing" class="section-content"></div>
            <div id="quickstart" class="section-content"></div>

        </main>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="marked.min.js"></script>
<script>
    $(document).ready(function() {
        // Load and render sections from ONBOARDING_GUIDE.md
        $.get('../ONBOARDING_GUIDE.md', function(data) { // Relative path from index.html
            const sections = parseMarkdownSections(data);

            // Render each section
            for (const sectionId in sections) {
                renderSection(sectionId, sections[sectionId]);
            }

            // Show the first section by default
            $('#overview').show();
            $('.nav-link[data-section="overview"]').addClass('active');
        });
           $.get('quickstart.md', function(data) { // Relative path from index.html

               $('#quickstart').html(marked.parse(data));
           });

        // Sidebar navigation click handler
        $('.nav-link').click(function(e) {
            e.preventDefault();
            $('.nav-link').removeClass('active');
            $(this).addClass('active');

            const sectionId = $(this).data('section');
            $('.section-content').hide(); // Hide all sections
            $(`#${sectionId}`).show(); // Show the selected section
        });
    });

    function parseMarkdownSections(markdown) {
      const sections = {};
      const lines = markdown.split('\n');
      let currentSection = null;

      for (const line of lines) {
        if (line.startsWith('# ')) {
          currentSection = 'overview';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## Core Values')) {
          currentSection = 'values';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## Architecture')) {
          currentSection = 'architecture';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## UI Components')) {
          currentSection = 'ui';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## Data Handling')) {
          currentSection = 'data';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## AI Models')) {
          currentSection = 'ai';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## Testing')) {
          currentSection = 'testing';
          sections[currentSection] = sections[currentSection] || [];
        } else if (line.startsWith('## How to Contribute')) {
          currentSection = 'contributing';
          sections[currentSection] = sections[currentSection] || [];
        }

        if (currentSection) {
          sections[currentSection].push(line);
        }
      }
      return sections;
    }


    function renderSection(sectionId, markdownContent) {
      if (!markdownContent) {
        console.warn(`renderSection: markdownContent is falsy for sectionId: ${sectionId}`);
        return;
      }
      const htmlContent = marked.parse(markdownContent.join('\n'));
      $(`#${sectionId}`).html(htmlContent);
    }

</script>

</body>
</html>
